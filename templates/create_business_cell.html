<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neuronum: The Real-Time E2E Browser</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="/static/favicon.png" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css">
</head>

  <body class="card-container">

    <div class="create-container">
      <div class="create-card">
        <div class="card-title">CREATE CELL</div>
        <div class="card-logo-place">
          <img src="/static/logo.png" class="card-logo">
        </div>
        <div class="card-meta">request business cell</div>
    
        <form id="createCellForm" action="/createCell" method="post" enctype="multipart/form-data">
          <div class="create-input-container">
            <div id="logo-preview-container">
              <img id="logo-preview" src="" alt="Logo Preview" class="logo-preview" style="display: none;">
              <img id="logo-placeholder" src="/static/logo.png" alt="Placeholder Logo" class="logo-placeholder">
            </div>
        
            <input class="create-cell-input" id="companyName" name="companyName" style="color: white;" placeholder="Business / Institute Name" required>
            <input class="create-cell-input" id="companyMail" name="companyMail" style="color: white;" placeholder="Business / Institute Mail" required>
            
            <div class="input-container">
              <input class="create-cell-input" type="password" id="companyPassword" name="companyPassword" style="color: white;" placeholder="Create Password" required>
              <button type="button" id="togglePassword"><i class="fa-solid fa-eye-slash"></i></button> <!-- Eye icon -->
            </div>
        
            <button type="button" class="upload-logo" id="upload-btn">upload logo</button>
            <input type="file" class="upload-hidden" id="logo-upload" name="logo" accept="image/*" style="display: none;" required>
        
          </div>
        
           <div class="terms-container">
          <label for="acceptTerms">
            <input
              type="checkbox"
              id="acceptTerms"
              name="acceptTerms"
              value="yes"
              class="checkbox"
              required
            >
            <span class="custom-checkbox"></span>
            <span>
              agree to the
              <a style="color: #00b35f;" href="/legals">Terms & Conditions</a>
              and
              <a style="color: #00b35f;" href="/legals">Privacy Policy</a>
            </span>
          </label>
        </div>
          <button type="button" id="createCell" class="submit-button">request cell</button>
        </form>
        
      </div>


    <div class="footer-container">
      <a href="/create_cell" class="back-button">
        <i class="fas fa-long-arrow-alt-left"></i>
      </a>

      <div class="fixed-footer">
        <a href="/">
          <img src="/static/logo.png" alt="Neuronum Logo - A Cyber Neuron" class="footer-logo">
        </a>
        <a class="footer-mail" href="mailto:welcome@neuronum.net">welcome@neuronum.net</a>
      </div>
    </div>

    <div id="termspopup" class="terms-popup">
      <div class="terms-popup-meta">
        By using our services, you agree to our
        <a href="https://neuronum.net/legals" target="_blank">Terms & Conditions</a>
        and the collection and use of data as described in our
        <a href="https://neuronum.net/legals" target="_blank">Privacy Policy</a>
      </div>
      <button class="terms-close" id="termsclose">
        <span>close window<i class="fas fa-long-arrow-alt-right"></i></span>
      </button>
    </div>


    <script>
const uploadButton = document.getElementById('upload-btn');
const logoInput = document.getElementById('logo-upload');
const previewImage = document.getElementById('logo-preview');
const placeholderText = document.getElementById('logo-placeholder');

uploadButton.addEventListener('click', function () {
    logoInput.click();
});

logoInput.addEventListener('change', function (e) {
    const file = e.target.files[0];

    if (file) {
        const reader = new FileReader();

        reader.onload = function (e) {
            previewImage.src = e.target.result;
            previewImage.style.display = 'block'; 
            placeholderText.style.display = 'none'; 
            uploadButton.textContent = 'Change Logo'; 
        };

        reader.readAsDataURL(file);
    }
});

uploadButton.addEventListener('click', function () {
    if (uploadButton.textContent === 'Change Logo') {
        previewImage.style.display = 'none';
        placeholderText.style.display = 'block';
        uploadButton.textContent = 'Upload Logo';

        logoInput.value = '';
    }
});

document.getElementById('createCell').addEventListener('click', function() {
    const form = document.getElementById('createCellForm');
    const companyMail = document.getElementById('companyMail').value;
    const acceptTerms = document.getElementById('acceptTerms').checked;
    const companyName = document.getElementById('companyName').value;
    const companyPassword = document.getElementById('companyPassword').value;
    const logoInput = document.getElementById('logo-upload');
    const logoFile = logoInput.files[0];

    const fields = [
        { value: companyName, message: 'Please enter a Business Name' },
        { value: companyPassword, message: 'Please enter a Password' },
        { value: companyMail, message: 'Please enter a Business Mail' }
    ];

    for (const field of fields) {
        if (field.value.length === 0) {
            alert(field.message);
            return;
        }
    }

    if (!logoFile) {
        alert('Please upload a logo.');
        return;
    }

    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
    const commonDomains = [
        'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 'aol.com', 'icloud.com',
        'mail.com', 'live.com', 'msn.com', 'me.com', 'zoho.com', 'yandex.com', 'protonmail.com',
        'gmx.com', 'inbox.com', 'mail.ru', 'fastmail.com', 'tutanota.com', 'hushmail.com',
        'comcast.net', 'att.net', 'verizon.net', 'btinternet.com', 'blueyonder.co.uk', 'sky.com',
        'hotmail.co.uk', 'outlook.co.uk', 'shaw.ca', 'bell.net', 'rogers.com', 'telus.net', 
        'videotron.ca', 'optusnet.com.au', 'bigpond.com', 'neuf.fr', 'orange.fr', 'wanadoo.fr',
        'live.co.uk', 'mailbox.org', 'webmail.co.za', 'rediffmail.com', 'mailchimp.com'
    ];

    const domainPart = companyMail.split('@')[1];
    const isValidEmail = emailRegex.test(companyMail);
    const isCommonDomain = domainPart && commonDomains.includes(domainPart.toLowerCase());

    if (!isValidEmail || isCommonDomain) {
        alert('Please enter a valid business email (no subdomains allowed, and no common domains like Gmail, Yahoo, etc.).');
        return;
    }

    if (acceptTerms) {
        form.submit();
    } else {
        alert("You must agree to the Terms & Conditions and Privacy Policy before submitting.");
    }
});


      document.addEventListener("DOMContentLoaded", function() {
      const togglePassword = document.getElementById("togglePassword");
      const passwordField = document.getElementById("companyPassword");

      togglePassword.addEventListener("click", function() {
        const type = passwordField.type === "password" ? "text" : "password";
        passwordField.type = type;


        this.querySelector("i").classList.toggle("fa-eye-slash");
        this.querySelector("i").classList.toggle("fa-eye");
      });
    });

    </script>
  </body>
</html>

