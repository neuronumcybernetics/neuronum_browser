<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="description" content="Neuronum is the real-time data engine for developers to build AI native apps and services in minutes using high-level Python">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="max-image-preview: none">
  <title>Neuronum: The Real-Time E2E Browser</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="/static/favicon.png" />
  <link rel="stylesheet" href="/static/desktop_design.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <style>
    #html-output {
      display: none;
      background-color: inherit;
      border: 1px solid var(--border-color-dark);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0 0 0;
      max-width: 90vw;
      height: 300px;
      overflow: auto;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
      flex-shrink: 0;
    }

    #toggle-log {
      position: absolute;
      top: 8px;
      right: 12px;
      background: transparent;
      border: none;
      color: #d8d8d8;
      font-size: 16px;
      cursor: pointer;
      outline: none;
      z-index: 1100;
    }

    #toggle-log:hover {
      color: #ffffff;
    }

    #log-entries {
      margin-top: 30px;
      flex-grow: 1;
      overflow-y: auto;
    }

    #message-log {
      position: fixed;
      bottom: 40px;
      right: 20px;
      width: 340px;
      max-height: 520px;
      padding: 20px;
      backdrop-filter: blur(20px);
      border-radius: 20px;
      border: 1px solid rgb(22, 22, 22);
      font-family: 'Fira Mono', monospace, 'Courier New', monospace;
      font-size: 13px;
      color: #d0d4d8;
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      transition: all 0.3s ease;
    }

    #message-log::-webkit-scrollbar {
      width: 8px;
    }

    #message-log::-webkit-scrollbar-track {
      background: transparent;
    }

    #message-log::-webkit-scrollbar-thumb {
      background-color: rgba(5, 5, 5, 0.15);
      border-radius: 4px;
      border: 2px solid transparent;
      background-clip: content-box;
    }

    .log-entry {
      margin-bottom: 12px;
      padding: 10px 14px;
      background: rgba(11, 11, 11, 0.8);
      border-radius: 12px;
      color: #cbd0d8;
      font-weight: 500;
      letter-spacing: 0.02em;
      white-space: pre-wrap;
      word-break: break-word;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .log-entry:hover {
      background: rgba(55, 55, 70, 0.85);
      color: #ffffff;
    }

    #message-log.closed {
      max-height: 80px;
      width: 80px;
      height: 50px;
      border-radius: 30px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    #message-log.closed #log-entries {
      display: none;
    }

    #message-log.closed #toggle-log i {
      transform: rotate(-90deg);
    }

    .view-nodes-button {
      display: block;
      width: fit-content;
      margin: 40px auto;
      padding: 10px 20px;
      background-color: #222;
      color: #eee;
      border: 1px solid #444;
      border-radius: 8px;
      font-size: 15px;
      text-decoration: none;
      transition: background-color 0.2s ease;
    }

    .view-nodes-button:hover {
      background-color: #333;
    }

    .bento-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
  padding: 40px 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.bento-card {
  background: linear-gradient(145deg, rgba(255,255,255,0.02), rgba(0,0,0,0.2));
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 16px;
  padding: 24px;
  color: #eaeaea;
  font-family: 'Inter', sans-serif;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.bento-card:hover {
  transform: scale(1.03);
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.03);
}

.bento-card h3 {
  margin: 0 0 10px;
  font-size: 20px;
}

.bento-card p {
  font-size: 14px;
  opacity: 0.8;
}

.bento-card a {
  margin-top: 16px;
  display: inline-block;
  font-size: 13px;
  color: #a8c0ff;
  text-decoration: none;
}

.bento-card a:hover {
  text-decoration: underline;
}

  </style>
</head>
<body class="pageContainer">

  <div id="html-output" class="html-container"></div>

  <section class="bento-grid">
  <div class="bento-card">
    <h3>🚀 Getting Started</h3>
    <p>Set up your environment and start building real-time AI apps with Neuronum in minutes.</p>
    <a href="/docs/getting-started.html">Read Docs →</a>
  </div>

  <div class="bento-card">
    <h3>📡 Live Synapse</h3>
    <p>Monitor real-time data streams across your connected synapses and gateways.</p>
    <a href="/live.html">Open Stream →</a>
  </div>

  <div class="bento-card">
    <h3>🧠 Nodes</h3>
    <p>View available nodes in your AI network and interact with their gateways.</p>
    <a href="/nodes">View Nodes →</a>
  </div>

  <div class="bento-card">
    <h3>📘 API Playground</h3>
    <p>Test and experiment with your API endpoints using our integrated sandbox.</p>
    <a href="/playground.html">Try API →</a>
  </div>

  <div class="bento-card">
    <h3>📂 Datasets</h3>
    <p>Access and upload datasets for training or real-time inference pipelines.</p>
    <a href="/datasets.html">Browse Datasets →</a>
  </div>

  <div class="bento-card">
    <h3>🧩 Extensions</h3>
    <p>Plug in new modules, models, or tools to extend the Neuronum runtime.</p>
    <a href="/extensions.html">View Extensions →</a>
  </div>
</section>


  <div id="message-log" class="open">
    <button id="toggle-log" aria-label="Toggle message log">
      <i class="fas fa-chevron-down"></i>
    </button>
    <div id="log-entries"></div>
  </div>

  <div class="footerContainer">
    <a href="#" id="disconnect-btn" class="backButton">
      <i class="fas fa-long-arrow-alt-left"></i>
    </a>

    <div class="fixedFooter">
      <a href="/"><img src="/static/logo.png" alt="Neuronum Logo - A Cyber Neuron" class="headerLogo"></a>
      <a class="footerMail"><span id="host"></span></a>
    </div>
  </div>

  <script>
    window.onload = function () {
      const host = localStorage.getItem('host');
      const password = localStorage.getItem('password');
      const synapse = localStorage.getItem('synapse');
      const session = localStorage.getItem('session');

      const hostSpan = document.getElementById('host');
      if (host && hostSpan) {
        hostSpan.textContent = host;
      } else {
        hostSpan.textContent = 'no host';
      }

      const messageLog = document.getElementById('message-log');
      const logEntries = document.getElementById('log-entries') || messageLog;

      function appendToLog(message) {
        const div = document.createElement("div");
        div.classList.add("log-entry");
        div.textContent = message;
        logEntries.prepend(div);
      }

      const streamID = host?.replace("::cell", "::stx");
      const payload = { host, session };

      function connectWebSocket() {
        const socket = new WebSocket(`wss://neuronum.net/api/sync/${streamID}`);

        socket.onopen = () => {
          socket.send(JSON.stringify(payload));
          appendToLog(">> Sent: " + JSON.stringify(payload));
        };

        socket.onmessage = (event) => {
          try {
            const data = JSON.parse(event.data);
            const label = data.label;
            const payload = data.data || {};

            appendToLog("<< " + (payload.json || event.data));

            if (label === "tx_response" && payload.html) {
              const htmlOutput = document.getElementById("html-output");
              htmlOutput.style.display = "flex";
              htmlOutput.innerHTML = payload.html;

              const scripts = htmlOutput.querySelectorAll("script");
              scripts.forEach(oldScript => {
                const newScript = document.createElement("script");
                if (oldScript.src) {
                  newScript.src = oldScript.src;
                  newScript.async = false;
                } else {
                  newScript.textContent = oldScript.textContent;
                }
                oldScript.parentNode.replaceChild(newScript, oldScript);
              });
            }
          } catch (e) {
            console.error("Invalid JSON in message:", e);
            appendToLog("!! Invalid JSON");
          }
        };

        socket.onclose = () => {
          appendToLog("!! Stream closed");
        };

        socket.onerror = (err) => {
          console.error("WebSocket error:", err);
          appendToLog("!! WebSocket error");
        };
      }

      if (host && session) {
        connectWebSocket();
      } else {
        appendToLog("⚠️ Missing host or session.");
      }

      // Disconnect button
      const disconnectBtn = document.getElementById("disconnect-btn");
      if (disconnectBtn) {
        disconnectBtn.addEventListener("click", () => {
          localStorage.clear();
          window.location.href = "/";
        });
      }

      // Toggle log
      const toggleBtn = document.getElementById('toggle-log');
      if (toggleBtn) {
        toggleBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          messageLog.classList.toggle('closed');
        });
      }
    };
  </script>
</body>
</html>
